<div id="TabbedPanels1" class="TabbedPanels">
  <ul class="TabbedPanelsTabGroup">
    <li class="TabbedPanelsTab" tabindex="1">1. Payment Details</li>
    <li class="TabbedPanelsTab TabbedPanelsTabSelected" tabindex="0">2. Upload Video</li>
    </ul>
    <div class="TabbedPanelsContentGroup">
      <div class="TabbedPanelsContent">
        <div class="tab_content col-xs-12">
          <%= nested_form_for @order, url: wizard_path, method: :put, :class => "col-xs-12" do |f| %>
            <% if @order.errors.any? %>
              <div id="error_explanation">
                <!-- <h2><%#= pluralize(@order.errors.count, "error") %> prohibited this order from being saved:</h2> -->
                <ul>
                  <% @order.errors.full_messages.each do |message| %>
                    <li class="error_div"><%= message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>
            <ul class="col-xs-12">
              <div class="col-xs-12 col-sm-1"></div>

              <div class="col-xs-12 col-sm-10">

                <li>
                  <h2 class="pull-left">Title</h2>
                  <span class="box">
                    <%= image_tag "icons/title.png" %>
                    <%= f.text_field :title %>
                  </span>
                </li>

                <li>
                  <h2 class="pull-left">Videos</h2>
                  <span class="box">
                    <%= f.fields_for :videos do |video| %>
                      <%= image_tag "icons/video.png" %>
                      <div class="field" style="float: right;margin-right: 345px;">
                        <%= video.file_field :video_url, :id => "uploadFile", :class => "upload", :placeholder => "Choose a Video to Upload" %>
                      </div>
                      <%= video.link_to_remove "Remove this video" %>
                    <% end %>
                    <%= f.link_to_add "Add a video", :videos %>
                  </span>
                </li>

                <li>
                  <h2 class="pull-left">Description</h2>
                  <span class="box">
                    <%= image_tag "icons/description.png", :class => "pull-left" %>
                    <%= f.text_area :description %>
                  </span>
                </li>

                <div class="col-xs-12 col-sm-4"></div>
                <div class="col-xs-12 col-sm-4">
                  <li>
                    <button><i class="fa fa-check" aria-hidden="true"></i> Upload Video</button>
                  </li>
                </div>
                <div class="col-xs-12 col-sm-4"></div>

              </div>

              <div class="col-xs-12 col-sm-1"></div>
            </ul>
          <% end %>
        </div>
      </div>
    </div>
  </ul>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    var fieldsCount,
    maxFieldsCount = 1,
    $addLink = $('a.add_nested_fields');

    var mfieldsCount,
    minFieldsCount = 0, // placed at 0 because first object is auto built from controller
    $removeLink = $('a.remove_nested_fields');

    function toggleAddLink() {
      $addLink.toggle(fieldsCount <= maxFieldsCount)
    }

    function toggleRemoveLink() {
      $removeLink.toggle(mfieldsCount <= minFieldsCount)
    }

    $(document).on('nested:fieldAdded', function() {
      fieldsCount += 1;
      toggleAddLink();
    });

    $(document).on('nested:fieldRemoved', function() {
      fieldsCount -= 1;
      toggleAddLink();
    });

    $(document).on('nested:fieldRemoved', function() {
      mfieldsCount -= 0;
      toggleRemoveLink();
    });

    // count existing nested fields after page was loaded
    fieldsCount = $('form .fields').length;
    toggleAddLink();

    mfieldsCount = $('form .fields').length;
    toggleRemoveLink();

    $('.field_with_errors').contents().unwrap();
  });
</script>